<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

	<title>2014</title>
	<meta name="generator" content="Zim 0.65">
	<meta name="viewport" content="width=device-width">
	<!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:300&subset=latin,greek,latin-ext' rel='stylesheet' type='text/css'> -->
	<![if !IE]>
	<!-- comment out for IE since it spams the user with warnings -->
	<script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
	<script type='text/javascript'>
		$(window).load(function(){$("#navigation").height( $("#content").height()+65 );});
	</script>
	<![endif]>
	<style>
		body, html {
			height:100%;
			font-family:'Open Sans', sans-serif;
			line-height:1.5em;
			font-weight:300;
			background-color:#FAFAFA;
			text-rendering:geometricPrecision;
			margin:0;
			padding:0;
		}
		.wrapper {
			height:100%;
			position:relative;
		}
		#navigation {
			background-color:#F3F3F3;
			display:inline-block;
			border-right:1px solid #EAEAEA;
			padding-right:65px;
			padding-top:65px;
			padding-left:25px;
			position:relative;
			float:left;
			min-height:100%;
		}
		#content {
			float:left;
			display:inline-block;
			position:absolute;
			max-width:960px;
			padding:65px;
		}
		#navigation ul {
			margin-top:0;
			margin-bottom:0;
			padding-left:40px;
		}
		#navigation li {
			list-style-type:none;
		}
		#navigation a {
			text-decoration:none;
			color:gray;
		}
		#navigation strong {
			color:#4E9A06;
			font-weight:400;
		}
		#navigation a:hover {
			text-decoration:underline;
		}
		#content h1:nth-child(1) {
			margin-top:0;
		}
		h1,h2,h3,h4,h5,h6 {
			color:#4E9A06;
			font-weight:300;
			margin-bottom: 0;
		}
		p {
			margin-top: 0;
		}
		#content a {
			color:#CE5C00;
		}
		#content a {
			text-decoration: none;
		}
		#content a:hover {
			text-decoration: underline;
		}
		#content a:active {
			text-decoration: underline;
		}
		#content strike {
			color: grey;
		}
		#content u {
			text-decoration: none;
			background-color: yellow;
		}
		#content tt {
			color: #2e3436;
		}
		#content pre {
			color: #2e3436;
			margin-left: 20px;
		}
		.backlinks {
			color:gray;
		}
		hr.footnotes {
			width: 20%;
			margin-left: 0;
		}
		@media print{
			#navigation{
				background-color:#FFF;
			}
		}

		span.zim-tag {
			color: #ce5c00;
		}
		div.zim-object {
			border-style:solid;
			border-width:1px;
		}

		.checked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8sMEGsKGkAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEBUlEQVRIx62V22tdRRTGf7Nn73P2ybntnNOe3NqkPTGgLTVUUZF6QatSLOKTPgqCIqLgQ0H/A1sQQbBYCBb1QfAxiC8tSO1FqHkwJVKtjdTGNraUmObsc9nXmfGh7cGYpM1D5nHWzPetteZb3wg2eB2YqYm4zSadsMtoboiNBH/3TE0awx6j+MRoxoTg/IYRvP19TQrJS0bzhdHGSyKFkLTtjSKwMjyiEz43ynhtP6bdjBCWyFobAf7eT7VhNF/q1FRbjYjmUohlCVPwnB+6FUxMTJipqSmUUhhjEGKd3bMT4ks/Y6oLBK2Yth8hHYtCJXOix7Nf7xLMzc0xOzvLzp078TyPNE3viW3QJPXzhNWbxFFKHCmMhoLn/FHodd48vGfhapdAacXQlkFK5dL6wIUm6fuTZPuvqDQhaMUYYyiVyuQr6rXDexYuAdi3tSv1ZJNs/R/CaszzT+1na88uXFnCEnJVgivBNN8uTJKmHQI/ptOOcXNZzMz9mOqFs90OHpipWcYwlo5P4ebnuOkrvr5wgrH+h3im7y36MzuwRXYZeKha/OhP0EkadFoxQSdGSotedR/+XwMc2XvKdNUFOFqZx6LKZWIiwjgkikNmLp/hm8sH+K1zjFTHXfBYdTi+eJArzXM0GxFxoBDCopLvo/fqEwi1XPkWkGqjFo2TgB1jOYZUKZTS/D1/ncmLh7jon0IbRWoiTi59ymzzJEEQE3cStNZsGxqlfPE57MBbOR8fP3hDGalOO9fq2DlBvmZw8xa2IxACGn6TydlD/O6f5OzSV/zif0cYhLQaEXGkKBbz7Ov/AOlXV1cxgBJRI3fuSTrpTawt18kWIZN1CFuaONI0w0WOXfsI43YIggh/KUSlhqxrMz74AkOZcWBm9QkH+Gw8NDLuITi+m0yzhluSyJzBLcpblUhFxywSRAEtPwQjsKVN30CNh0uvYuOubSHLtN3J0TO1j0pmBNuFbFWRK0gyPRZpktL2I5JQkclKakNlnh54g6ocvevUr/Ai2a7wineEkcJupA3S1Wg0nVZM2E6wbEF5U5G9Q++wI7sfR7h3N8HVNstykBfzH+KJEZwiWD0aIwxCgJ0R1Mu7GXOeJSuK93bZtQIle4D9pUNU5DC5jEsu55AvZakM5NicGyEj8uuz8bUCQgj67QfY671P3vEoeC69gy695U1U7NG7XV0pUwBjDJa1/JJlWWxzHuflzQe5FJ/GsgUVuZ2t8lEkTvfc0aNHb72flBhjVicQQqCUuvM3/M+WDVguWBrMVdDXEGZlBVEUrVCU9d9s5+fnaTQa2PZyPxEIhJaI1EEoZwX4ncynp6fXrmB4eJjR0VFarRbNZnP9P9rt9gohqNVq1Ov1ZbF/AZGev3hLJ2/zAAAAAElFTkSuQmCC)}
		.xchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8bDYnDxEwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAEK0lEQVRIx9WVS2hTWRjHf/eR3CY1nbxMH2YiZRQS6qO13YlMVxY3SnVcuNIBFezGpSADLoQqLu1sHJCqdCFSXFpw4YOCSH3BtFqttTNamabX3DS5bfO6uffMoglja3RGcDMHzuac7/z/53++//cd+L8P6VuCPQYZ8ADNgBd4J31DcDcQs+GnHByRocEDv0kfBSjAOlYCs11Q+gpwDegS8LMJ+3QIK0ATzEhV8Odnz5bzw8P4dJ25aJQ/WlvJ1df/K7hSLtOcTNI+Pk69rpMTgqIQhCDvh1/VSpw79+gRrRMTmLZNezLJJsPg+a5dmOEwQlFqg1sWG16/Jv7sGWXDwBACFQjC9HcwIMONKkGp4PGAJGEDS0IQmZlhnWnye3c3eiyGo6qr3WHbrJ+dJf7gAXI6zSIr72T7/fgzmT4FHnTBsgrQBfYvTU0km5vxz86iADnAm0rRPTWFt7cXZccOJJcLAGHb2K9ekT93jmwmwwdAAFpjI6Ntbfxw5879ag7l6o1sr5eHHR3IsRgeQK/M4sQE+YEB7JcvEY6zAj45SWFgAPPxYwzHoQxIkQjTPT0kIxE+Noj8sexFn4/xnh58iQTeSpHkHAdrbIzi0BCOrmNPTpK/eJHM3bt8sCyKQCiR4NWePWSiUZw1+ZLXJm4pFKLhzBlCsRh2RUXacVgeGaF47RrL58+zcP8+RrmMkCQinZ1EL1zAjERqmkH+tLYl1G3bCJw4QUjT0IA0MJfLMX/5MqmHD0nZNiUgtGULG/r7ccXjINWuWbnmqsuFu7sb/4EDNLlcBIEioNs2KUAFGmMxmk6dQm1tRZI+3xBqEkiShBQOox05Ql1nJ26gvuIUAWiKQnj/ftStW5Fk+YuF+NldsbBA4cYN9KdPmaso8Fc62ZJtk7l1C2t0FGdxESHE1xE4hkHh6lX0oSHSpRIewC/LrPf7CSgKNpCamkI/fZr8pUuIZBIcpyaBunahPp1mub+fDyMjGKUSChCsq6Nh717q9u2jbnSU0uAgRrFIwTThyhUCqRS+hgZKLS1fJvDm87SNjZGcnsYUAjcQ8vsJ9/Xh7u1FDgRQN20iks3iDA+zZFmYhQLqzZtsj8WY3L0baY2Sf55ICCKpFHUzM2SEQAJCHg+hY8fQDh5EDgRWDoRC1J88SePRo2geD0XAcBy8b98Sv3ePYDZbbf2rFQjLIphMsmDbaEBQVQkePox26BCSz7e6i4bDrDt+nGYhmBscpFAskheC4Js3bPR4qHphFYEnlcI7P4/jdqNpGu8TCe4oCsXr1z//F2ga3+/cSfTJE0qmSVYIsKzaOZDcbjKyzFIiwfvt21kMBLA07YsetzWNd+3tLLW0sH5igvT8PH9Go/z44kX+E4LGjg7GDYOcy4XlOEgLC//5P/5LCFzxOPLmzWyIx+m6fduu7v0NVGqyTSycKksAAAAASUVORK5CYII=)}
		.unchecked-box {list-style-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAANOgAADMQBiN+4gQAAAAd0SU1FB9gKGQ8qAt8h3m8AAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAA60lEQVRIx+2VsQqDMBRF70sCLg5OLoKgjk7+lJ/hh+STXBwcnRz8ArMEkrxOFktbaC3tULzTg5e8k5vADXDq70VbobXmvu/hvQczg4heHrJfXxQFuq67blZbMc8zpmlCXddIkgTOuZcBUko45zCOI6y1Nz2xFSEEZFmGOI7fGg4A3nsQEZqmuXOu9jallACAtm3fvmutNaIoAjM/dkBECCF89KCbk4eAb+kEnIAT8EsAM0OIz3hSyrssUvss8t5fg+uIrLXPs0gIgWVZYIyBUurQyYdheO4gz3NUVQVjDNZ1PfSjpWmKsixvehfB9GBZ3NndrgAAAABJRU5ErkJggg==)}
		ul {list-style-image: none}
		/* ul rule needed to reset style for sub-bullets */

	</style>
</head>

<body>
	<div class="wrapper">
		<div id="navigation"> <ul>
<li><a href="../Exams.html" title="Exams" class="page">Exams</a>
<ul>
<li><b>2014</b></li>
<li><a href="./2015.html" title="2015" class="page">2015</a></li>
</ul>
</li>
<li><a href="../Home.html" title="Home" class="page">Home</a></li>
<li><a href="../Lectures.html" title="Lectures" class="page">Lectures</a></li>
<li><a href="../Practicals.html" title="Practicals" class="page">Practicals</a></li>
</ul>
 </div>
		<div id="content">
			<h1>2014 <a name='Exams:2014'></a></h1>

			<p>
Created Sun Dec 4 2016
</p>

<p>
Rubric (e.g. Answer TWO questions. Each question is worth 25 marks; the marks for each part of a question are shown in brackets.)
</p>

<p>
Note: There are tables in the exam file. 
</p>

<h2>1.</h2>

<br>

<h3>a) At the logical level (relational level), the relational database for the training company shown above is composed of seven tables: trainer, trainee, course, registration, assessments, batch and submissions (each with some associated records). Using UML notation, draw an enhanced entity-relationship (EER) diagram that represents the same database structure at the conceptual level. For each entity, show its minimum and maximum participatory constraints in the relationship and explain your choice of values. (6)</h3>

<p>
<div style='padding-left: 30pt'>
Same as assignment 2 question 1
</div>
</p>

<br>

<h3>b) It has been decided to extend the relational database for the training company shown above to store information about the different programmes of study that trainees can pursue towards obtaining accreditation. A diploma is a one-year study programme while a higher diploma programme involves studying for four years. Each year of study is divided into two terms and each term involves trainees registering for a specific set of four courses (all recommended four courses are compulsory and there are no elective courses). Assume the above description as the only information available to you about programmes of study. Also assume that you have access to the details (EER design and data dictionary) of the existing database which is shown above. You are allowed to use any entities/tables from the existing database for helping with the extension/integration.</h3>

<br>

<h4>i) Create a conceptual model for the above requirements and show your model as an Enhanced Entity Relationship (EER) diagram using the UML notation. (4)</h4>

<p>
<div style='padding-left: 30pt'>
Same as first question with some improvements
</div>
</p>

<br>

<h4>ii) Transform the conceptual model from above into a connected set of tables in your design, explaining in detail the steps you have followed. (4)</h4>

<br>

<h3>c) In the context of relational databases,</h3>

<br>

<h4>i) Does the ‘Submissions’ table have referential integrity? Justify your answer (answers without justifications will be ignored). (2)</h4>

<p>
<div style='padding-left: 30pt'>
Yes it does because all (non null) foreign key fields in the table refrence an existing entry in the table it refers to
</div>
</p>

<br>

<h4>ii) What is the result of executing the following statement? (2)</h4>

<br>

<p>
INSERT INTO Submissions<br>
VALUES(4723568,1,2074,12,25);
</p>

<p>
A new entry is added into the Submissions table with <br>
TraineeID : 4723568<br>
AssesmentID: 1<br>
CourseID: 2074<br>
SubmissionDate: the current date (assuming the database is setup to automatically fill in the date field<br>
BatchID: 12 <br>
Mark: 25
</p>

<h4>iii) If the above database is implemented as a MYSQL server database, what table type you would choose for the Submissions table and why? (2)</h4>

<p>
<div style='padding-left: 30pt'>
I would pick InnoDB  since it supports referential integrity
</div>
</p>

<br>
<br>

<h3>d) In terms of database design,</h3>

<br>

<h4>i) What is meant by third normal form (3NF)? (1)</h4>

<p>
<div style='padding-left: 30pt'>
A database is in Bacus Third Normal Form if it is in First Normal Form, Second Normal Form, and no non-primary keys attributes are transitively dependant on the primary key
</div>
</p>

<br>

<h4>ii) Is the ‘Submissions’ table in third normal form? Justify your answer (answers without justifications will be ignored). Assume that the Submissions table has TraineetId, AssessmentId and CourseId as primary key. (2)</h4>

<p>
<div style='padding-left: 30pt'>
It is because:<br>
It is in 1NF since the only data from other tables is the foreign key<br>
It is in 2NF All non primary keys are dependant on the primary key<br>
And no non-primary keys are transitively dependant on the primary key
</div>
</p>

<br>

<h4>iii) A friend of yours after critically examining the above database makes the following comment “Marks obtained by a trainee should be recorded in the Trainee table but not in the Submissions table because they belong to that trainee.” Write your response to the above comment. (2)</h4>

<p>
<div style='padding-left: 30pt'>
I disagree because if it was done like that then each tranee could only have one mark. This way the trainee can have many different marks on different assessments
</div>
</p>

<br>

<h2>2.</h2>

<br>

<h3>a) The commercial training company wants to send email messages warning trainees who failed to submit all of the required assessments (Assume that the reminders contain a standard message automatically sent to trainees without any reference to specific courses or assessments). Write an SQL query to list all the TraineeIds, names and emails of trainees who have not submitted any of the required assessments. (4)</h3>

<br>

<p>
SELECT Trainee.TraineeID Trainee.fname Trainee.lnam Trainee.email<br>
FROM Trainee<br>
WHERE NOT EXISTS(SELCT * FROM Trainee, Submissions WHERE Trainee.TraineeID = Submissions.TraineeID)
</p>

<h3>b) The department runs a policy to penalize late submissions by subtracting 5% of the marks. Write an SQL query to list the TraineeIds, names, course title, assessment title and reduced mark (mark obtained after applying the penalty) for all the submissions that were received after the deadline. (4)</h3>

<p>
<div style='padding-left: 30pt'>
Update submissions, assessments <br>
set mark = mark - mark/20<br>
WHERE SubmissionDate &gt; SubmissionDeadline
</div>
</p>

<p>
<div style='padding-left: 30pt'>
SELECT submission.TraineeID, fname, lname CourseTitle, Assessment.Title, mark <br>
FROM Submissions,  Trainee, Assessment, Course<br>
WHERE submission.TraineeID = trainee.traineeid<br>
AND course.courseid = assessment.courseid<br>
AND assessment.assessmentid = submission.assessmentid 
</div>
</p>

<br>

<h3>c) Trainees are allowed to appeal against their marks in assessments. The director of the company, who is in charge of appeals, contacts the appropriate trainer who marked the script under appeal. Suppose that Julie Pole appeals against her mark for the SQL assignment in the course 2074. Write an SQL query showing the details of the trainer who marked her script. (4)</h3>

<p>
<div style='padding-left: 30pt'>
SELECT trainer.trainerid, trainer.fname, trainer.lname, trainer.email<br>
FROM trainer, trainee, submissions, batch<br>
WHERE trainee.lname = 'Pole'<br>
AND trainee.fname = 'Julie'<br>
AND trainer.trainerid = batch.trainerid<br>
AND assessment.batchid = batch.batchid
</div>
</p>

<br>

<h3>d) In relational databases,</h3>

<br>

<h4>i) Explain what a view is. (1)</h4>

<p>
<div style='padding-left: 30pt'>
A view is a safe and easy way to show virtual tables.<br>
ie. it saves a query and dynamically creates the resulting table each time the query is run.
</div>
</p>

<br>

<h4>ii) As stated above, the director of the company owns all the tables in the database. She decides to control trainers’ access to data. Each trainer is allowed to view information related to submissions that they mark without any trainee details. Write an SQL query to define a view that shows submission details such as course title, assessment title, max_marks for an assessment, without any trainee details for May Collins. (3)</h4>

<p>
<div style='padding-left: 30pt'>
CREATE VIEW maygrades AS <br>
SELECT coursetitle, assessmenttitle, maxmarks <br>
FROM trainee, assessment, course, <br>
WHERE trainee.fname = 'May'<br>
AND trainee.lname = 'Collins'<br>
AND assessment.courseid = course.courseid 
</div>
</p>

<br>

<h4>iii) In addition to the above view, the director also wants to limit trainers to only viewing the data but not altering them. State the feature offered by a relational database management system to restrict the users for read only access to information (1)</h4>

<p>
<div style='padding-left: 30pt'>
REVOKE alter, update ON *.* FROM username
</div>
</p>

<br>

<h4>iv) Write an SQL query to define read-only access to May Collins to the view defined in 2.(d).ii above. (2)</h4>

<p>
<div style='padding-left: 30pt'>
REVOKE ALL ON maygrades TO maycollins 
</div>
</p>

<p>
<div style='padding-left: 30pt'>
GRANT SELECT ON maygrades TO maycollins
</div>
</p>

<br>

<h3>e) Suppose that the company wants to build a Web-based application which provides functionality for trainers to enter marks online. If you were hired to design the internet security of the company’s data, software and hardware,</h3>

<br>

<h3>i) Describe your design in terms of the security techniques used. (3)</h3>

<p>
<div style='padding-left: 30pt'>
A) I would not allow them to directly input queries into the database.<br>
B) I would filter all the content they submit and make sure that it is the correct data type<br>
C) I would add a proxy and all users will only communicate with the proxy server
</div>
</p>

<br>

<h3>ii) Explain how your design achieves its purpose. (3)</h3>

<p>
<div style='padding-left: 30pt'>
A) this way the users can't input commands which I don't want them to<br>
B) This prevents users from using SQL Injection to alter the table in an unwanted way<br>
C) Users do not know the internal ip addresses
</div>
</p>

<br>
<br>

<h2>3.</h2>

<br>

<h3>a) Consider the following SQL query which refers to the Assessment and Submissions tables given above:</h3>

<p>
SELECT A.Title<br>
FROM Assessment A, Submissions S<br>
WHERE S.AssessmentId = A. AssessmentId<br>
AND S.CourseId=A.CourseId<br>
AND A.Title=’SAP’;
</p>

<p>
Using relational algebra notation, ∏ for projection, σP for selection with predicate P, × for a Cartesian product, ⋈ for a natural join, and ⋂, ⋃ for conjunction, write down three different but logically equivalent ways of expressing the above query in relational algebra. In your answers, use the given table aliases for brevity, use brackets as necessary to avoid ambiguities, and label your answers A, B and C. (5)
</p>

<p>
A) Π Title (A) σ AssessmentID = AssessmentID (S x A) Λ CourseID=CourseID (A x S) Λ Title = 'SAP' (A) <br>
B) Π Title (A⋈S) σ Title = 'SAP' (A) <br>
C) Π Title σ (AssessmentID = AssessmentID (S x A)) ⋈ (CourseID = CourseID (A x S)) Λ Title = 'SAP' (A)
</p>

<h3>b) In the database given above, suppose the Assessment and Submissions tables have very many rows but have no indexes. Arrange your solution (A,B,C) from part 3.(a) in order of efficiency and justify your answer. (2)</h3>

<p>
<div style='padding-left: 30pt'>
B &gt; C &gt; A<br>
Since B uses a natural join whereas A uses many more checks and C is in the middle because it uses a natural join but also has many checks
</div>
</p>

<br>

<h3>c) Consider the following transaction scenario where D i denote data items and T i denote transactions:</h3>

<br>

<h4>i) Produce a wait-for-graph for the above transaction scenario. (4)</h4>

<p>
<div style='padding-left: 30pt'>
<a href="https://en.wikipedia.org/wiki/Wait-for_graph" title="https://en.wikipedia.org/wiki/Wait-for_graph" class="https">https://en.wikipedia.org/wiki/Wait-for_graph</a>
</div>
</p>

<br>

<h4>ii) Using the wait-for-graph from part (i), determine whether the transactions are in a deadlock and explain how you detected deadlock. (3)</h4>

<p>
<div style='padding-left: 30pt'>
There is because the graph is circular
</div>
</p>

<h4>iii) Explain how you would resolve the deadlock if it is detected in part(ii). (3)</h4>

<p>
<div style='padding-left: 30pt'>
By stopping tranaction T6 all other tranactions can complete sucessfully. Then restart T6
</div>
</p>

<h3>d) In relational databases,</h3>

<br>

<h4>i) Explain what an index is. (1)</h4>

<p>
<div style='padding-left: 30pt'>
An index is like the appendix to a book. An appendix in a book has links to specific parts of a book whereas an index in a database stores info on records.
</div>
</p>

<h4>ii) With the help of simple sketches show how indexing works. If required use the trainer table as an example. (2)</h4>

<p>
<div style='padding-left: 30pt'>
Indexes point to specific file segmants. Drawing should represent indexes linking to parts of the HDD
</div>
</p>

<h4>iii) Consider the following B+ tree. Draw the tree after a new record, with a search key field value of 13, is inserted into the tree. (5)</h4>

<p>
<div style='padding-left: 30pt'>
Same as last question in exam 2015
</div>
</p>


			<br>
			<span class="backlinks">
			</span>

			
		</div>
	</div>
</body>
</html>

